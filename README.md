# TV Channels - Android TV App

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–µ–ª–µ–≤–∏–∑–∏–æ–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –Ω–∞ Android TV —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞–Ω–∞–ª–æ–≤ –∏–∑ M3U –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì∫ **–ü—Ä–æ—Å–º–æ—Ç—Ä TV –∫–∞–Ω–∞–ª–æ–≤** - –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ M3U** - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ –∏–∑ –æ–Ω–ª–∞–π–Ω –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
- üíæ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –æ—Ñ–ª–∞–π–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- üîç **–ü–æ–∏—Å–∫ –∫–∞–Ω–∞–ª–æ–≤** - –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏—é
- ‚≠ê **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª—é–±–∏–º—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
- üì± **Android TV –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—É–ª—å—Ç–∞ –î–£
- üéÆ **Leanback UI** - –ù–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Android TV

## –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–Ω–∞–ª–æ–≤

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞–Ω–∞–ª—ã –∏–∑ M3U –ø–ª–µ–π–ª–∏—Å—Ç–∞:
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: https://gitlab.com/iptv135435/iptvshared/raw/main/IPTV_SHARED.m3u
- **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ö–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **Fallback**: –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–ª–µ–π–ª–∏—Å—Ç–∞

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã M3U

```m3u
#EXTM3U
#EXTINF:-1 tvg-id="channel_id" tvg-logo="logo_url" group-title="category",Channel Name
http://stream.url/channel.m3u8
```

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–æ–≤

- **–û–±—â–∏–µ** - –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–ª–µ–∫–∞–Ω–∞–ª—ã
- **–†–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ** - –†–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
- **–°–ø–æ—Ä—Ç** - –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
- **–î–µ—Ç—Å–∫–∏–µ** - –î–µ—Ç—Å–∫–∏–µ –∫–∞–Ω–∞–ª—ã
- **–ö—É–ª—å—Ç—É—Ä–∞** - –ö—É–ª—å—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
- **–ù–æ–≤–æ—Å—Ç–∏** - –ù–æ–≤–æ—Å—Ç–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
- **–†–∞–¥–∏–æ** - –†–∞–¥–∏–æ—Å—Ç–∞–Ω—Ü–∏–∏
- **–î—Ä—É–≥–∏–µ** - –ü—Ä–æ—á–∏–µ –∫–∞–Ω–∞–ª—ã

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd TV
```

2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Android Studio

3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ Android TV —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä

4. –°–æ–±–µ—Ä–∏—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
./gradlew assembleDebug
adb install app/build/outputs/apk/debug/app-debug.apk
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É–ª—å—Ç –î–£ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∫–∞–Ω–∞–ª–æ–≤
- –ù–∞–∂–º–∏—Ç–µ OK –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞

### –ü–æ–∏—Å–∫
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –ø–æ–∏—Å–∫–∞ –Ω–∞ –ø—É–ª—å—Ç–µ
- –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
- –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ —Å–ø–∏—Å–∫–∞

### –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
- –î–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–∞–Ω–∞–ª –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞
- –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **MVVM** - Model-View-ViewModel –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Repository Pattern** - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
- **Retrofit** - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è API
- **Gson** - JSON –ø–∞—Ä—Å–∏–Ω–≥
- **SharedPreferences** - –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### M3UParser
–ü–∞—Ä—Å–µ—Ä M3U –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- –ü–∞—Ä—Å–∏–Ω–≥ EXTINF –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ URL —Å—Ç—Ä–∏–º–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ group-title

#### ChannelRepository
–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞–º–∏:
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ M3U –ø–ª–µ–π–ª–∏—Å—Ç–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ SharedPreferences
- –ü–æ–∏—Å–∫ –∫–∞–Ω–∞–ª–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω—ã–º

#### PlaylistUpdater
–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–∞:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/src/main/java/com/example/tvchannels/
‚îú‚îÄ‚îÄ api/                    # API –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ ApiClient.kt
‚îÇ   ‚îî‚îÄ‚îÄ ChannelApiService.kt
‚îú‚îÄ‚îÄ data/                   # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ Channel.kt
‚îÇ   ‚îú‚îÄ‚îÄ ChannelRepository.kt
‚îÇ   ‚îú‚îÄ‚îÄ M3UParser.kt
‚îÇ   ‚îî‚îÄ‚îÄ TestStreams.kt
‚îú‚îÄ‚îÄ ui/                     # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ ChannelAdapter.kt
‚îÇ   ‚îú‚îÄ‚îÄ ChannelPresenter.kt
‚îÇ   ‚îî‚îÄ‚îÄ SearchFragment.kt
‚îú‚îÄ‚îÄ utils/                  # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ PlaylistUpdater.kt
‚îú‚îÄ‚îÄ service/                # TV Input Service
‚îÇ   ‚îî‚îÄ‚îÄ TVInputService.kt
‚îú‚îÄ‚îÄ MainActivity.kt         # –ì–ª–∞–≤–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
‚îî‚îÄ‚îÄ PlayerActivity.kt       # –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–ª–µ–µ—Ä–∞
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```gradle
dependencies {
    implementation 'androidx.leanback:leanback:1.0.0'
    implementation 'androidx.fragment:fragment-ktx:1.5.5'
    implementation 'com.squareup.retrofit2:retrofit:2.9.0'
    implementation 'com.squareup.retrofit2:converter-gson:2.9.0'
    implementation 'com.google.code.gson:gson:2.9.0'
    implementation 'com.github.bumptech.glide:glide:4.14.2'
}
```

## –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–∏–º—ã

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–∏–º—ã:
- Big Buck Bunny (H.264)
- Sintel (H.264)
- Tears of Steel (H.264)
- –ò –¥—Ä—É–≥–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã

## –†–∞–∑—Ä–µ—à–µ–Ω–∏—è

```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
```

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è**: Android 8.0 (API 26)
- **–¶–µ–ª–µ–≤–∞—è –≤–µ—Ä—Å–∏—è**: Android 13 (API 33)
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Android TV
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: Leanback, –ø—É–ª—å—Ç –î–£, HLS —Å—Ç—Ä–∏–º—ã

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –ª–µ–≥–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ M3U –ø–ª–µ–π–ª–∏—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–∞ –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞. –î–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ü–∏—é "–û–±–Ω–æ–≤–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö. 